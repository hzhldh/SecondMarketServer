<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hzh.dao.OrderDao">
    <!-- <resultMap id="Order" type="com.hzh.entity.Order" >
	    <result column="shopping_id" property="shopping_id" jdbcType="INTEGER" />
	    <result column="goods_id" property="goods_id" jdbcType="INTEGER" />
	    <result column="username" property="username" jdbcType="VARCHAR" />
	    <association property="publisher" javaType="com.hzh.entity.User">  
            <id column="goods_id" property="goods_id"/>  
            <result column="source_type" property="source_type"/>  
            <result column="goods_name" property="goods_name"/> 
            <result column="publisher" property="publisher"/> 
            <result column="goods_img" property="goods_img"/> 
            <result column="second_price" property="second_price"/> 
            <result column="goods_status" property="goods_status"/> 
        </association> 
    </resultMap> -->
    
    <!-- 下单-增加 -->
    <insert id="addOrder" parameterType="Order">
        INSERT into order(goods_id,publisher,order_people,final_price,order_time) VALUES(#{goods_id},#{publisher},#{order_people},#{final_price},#{order_time})
    </insert>
    
    <!-- 查询是否重复下单 -->
    <select id="selectRepeatOrder" parameterType="Order" resultType="int">
        select count(1) from order where order_people=#{order_people} and goods_id=#{goods_id}
    </select>
    
    <!-- 删除订单 -->
    <delete id="delOrder">
        delete from order where order_id=#{order_id}
    </delete>
</mapper>